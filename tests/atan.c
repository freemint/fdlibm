#include "testconfig.h"
#define TEST_FUNC_F_F __MATH_PRECNAME(atan)
#include "testdriver.h"



static test_f_f_data const fatan_data[] = {
	{ __LINE__, ZERO_P, ZERO_P, 0 },
	{ __LINE__, ZERO_M, ZERO_M, FLAG_FAIL_ARANYM2 }, /* sometimes fails on ARAnyM, returning +0 ??? */
	{ __LINE__, INF_P, HEXCONST_PI_2, 0 },
	{ __LINE__, INF_M, HEXCONST_PI_2_M, 0 },
	{ __LINE__, QNAN_P, QNAN_P, 0 },
	{ __LINE__, QNAN_M, QNAN_P, 0 },
	{ __LINE__, SNAN_P, QNAN_P, 0 },
	{ __LINE__, SNAN_M, QNAN_P, 0 },

	{ __LINE__, HEXCONSTE(3.40282346638528859812e+38, 0x407e, 0xffffff00L, 0x00000000L), HEXCONSTE(1.57079632679489661926e+00, 0x3fff, 0xc90fdaa2L, 0x2168c235L), 0 },
	{ __LINE__, HEXCONSTE(1.79769313486231570815e+308, 0x43fe, 0xffffffffL, 0xfffff800L), HEXCONSTE(1.57079632679489661926e+00, 0x3fff, 0xc90fdaa2L, 0x2168c235L), 0 },
	{ __LINE__, HEXCONSTE(1.18973149535723176502e+4932, 0x7ffe, 0xffffffffL, 0xffffffffL), HEXCONSTE(1.57079632679489661926e+00, 0x3fff, 0xc90fdaa2L, 0x2168c235L), 0 },
	{ __LINE__, HEXCONSTE(-3.40282346638528859812e+38, 0xc07e, 0xffffff00L, 0x00000000L), HEXCONSTE(-1.57079632679489661926e+00, 0xbfff, 0xc90fdaa2L, 0x2168c235L), 0 },
	{ __LINE__, HEXCONSTE(-1.79769313486231570815e+308, 0xc3fe, 0xffffffffL, 0xfffff800L), HEXCONSTE(-1.57079632679489661926e+00, 0xbfff, 0xc90fdaa2L, 0x2168c235L), 0 },
	{ __LINE__, HEXCONSTE(-1.18973149535723176502e+4932, 0xfffe, 0xffffffffL, 0xffffffffL), HEXCONSTE(-1.57079632679489661926e+00, 0xbfff, 0xc90fdaa2L, 0x2168c235L), 0 },
	{ __LINE__, HEXCONSTE(1.00000000000000000000e+00, 0x3fff, 0x80000000L, 0x00000000L), HEXCONSTE(7.85398163397448309628e-01, 0x3ffe, 0xc90fdaa2L, 0x2168c235L), FLAG_INEXACT2 },
	{ __LINE__, HEXCONSTE(-1.00000000000000000000e+00, 0xbfff, 0x80000000L, 0x00000000L), HEXCONSTE(-7.85398163397448309628e-01, 0xbffe, 0xc90fdaa2L, 0x2168c235L), FLAG_INEXACT2 },
	{ __LINE__, HEXCONSTE(7.50000000000000000000e-01, 0x3ffe, 0xc0000000L, 0x00000000L), HEXCONSTE(6.43501108793284386797e-01, 0x3ffe, 0xa4bc7d19L, 0x34f70924L), FLAG_INEXACT2 },
	{ __LINE__, HEXCONSTE(3.12500000000000000000e-02, 0x3ffa, 0x80000000L, 0x00000000L), HEXCONSTE(3.12398334302682762529e-02, 0x3ff9, 0xffeaadddL, 0x4bb12542L), FLAG_INEXACT2 },
	{ __LINE__, HEXCONSTE(9.76562500000000000000e-04, 0x3ff5, 0x80000000L, 0x00000000L), HEXCONSTE(9.76562189559319430426e-04, 0x3ff4, 0xfffffaaaL, 0xaadddddcL), FLAG_INEXACT2 },
	{ __LINE__, HEXCONSTE(3.05175781250000000000e-05, 0x3ff0, 0x80000000L, 0x00000000L), HEXCONSTE(3.05175781155260968620e-05, 0x3fef, 0xfffffffeL, 0xaaaaaaaeL), FLAG_INEXACT3 },
	{ __LINE__, HEXCONSTE(9.53674316406250000000e-07, 0x3feb, 0x80000000L, 0x00000000L), HEXCONSTE(9.53674316405960879438e-07, 0x3fea, 0xffffffffL, 0xffaaaaabL), FLAG_INEXACT3 },
	{ __LINE__, HEXCONSTE(2.98023223876953125000e-08, 0x3fe6, 0x80000000L, 0x00000000L), HEXCONSTE(2.98023223876953036773e-08, 0x3fe5, 0xffffffffL, 0xffffeaabL), FLAG_INEXACT2 },
	{ __LINE__, HEXCONSTE(9.31322574615478515625e-10, 0x3fe1, 0x80000000L, 0x00000000L), HEXCONSTE(9.31322574615478515373e-10, 0x3fe0, 0xffffffffL, 0xfffffffbL), FLAG_INEXACT2 },
	{ __LINE__, HEXCONSTE(2.91038304567337036133e-11, 0x3fdc, 0x80000000L, 0x00000000L), HEXCONSTE(2.91038304567337036133e-11, 0x3fdc, 0x80000000L, 0x00000000L), FLAG_INEXACT2 },
	{ __LINE__, HEXCONSTE(9.09494701772928237915e-13, 0x3fd7, 0x80000000L, 0x00000000L), HEXCONSTE(9.09494701772928237915e-13, 0x3fd7, 0x80000000L, 0x00000000L), 0 },
	{ __LINE__, HEXCONSTE(2.84217094304040074348e-14, 0x3fd2, 0x80000000L, 0x00000000L), HEXCONSTE(2.84217094304040074348e-14, 0x3fd2, 0x80000000L, 0x00000000L), 0 },
	{ __LINE__, HEXCONSTE(8.88178419700125232339e-16, 0x3fcd, 0x80000000L, 0x00000000L), HEXCONSTE(8.88178419700125232339e-16, 0x3fcd, 0x80000000L, 0x00000000L), 0 },
	{ __LINE__, HEXCONSTE(2.77555756156289135106e-17, 0x3fc8, 0x80000000L, 0x00000000L), HEXCONSTE(2.77555756156289135106e-17, 0x3fc8, 0x80000000L, 0x00000000L), 0 },
	{ __LINE__, HEXCONSTE(8.67361737988403547206e-19, 0x3fc3, 0x80000000L, 0x00000000L), HEXCONSTE(8.67361737988403547206e-19, 0x3fc3, 0x80000000L, 0x00000000L), 0 },
	{ __LINE__, HEXCONSTE(2.50000000000000000000e+00, 0x4000, 0xa0000000L, 0x00000000L), HEXCONSTE(1.19028994968253173296e+00, 0x3fff, 0x985b6bcbL, 0x526d42c5L), FLAG_INEXACT },
	{ __LINE__, HEXCONSTE(1.00000000000000000000e+01, 0x4002, 0xa0000000L, 0x00000000L), HEXCONSTE(1.47112767430373459182e+00, 0x3fff, 0xbc4de960L, 0xb0029c17L), FLAG_INEXACT },
	{ __LINE__, HEXCONSTE(1.00000000000000000000e+06, 0x4012, 0xf4240000L, 0x00000000L), HEXCONSTE(1.57079532679489661956e+00, 0x3fff, 0xc90fd23eL, 0xa5986741L), FLAG_INEXACT },
	{ __LINE__, HEXCONSTE(2.14748364800000000000e+09, 0x401e, 0x80000000L, 0x00000000L), HEXCONSTE(1.57079632632923533195e+00, 0x3fff, 0xc90fdaa1L, 0x2168c235L), 0 },
	{ __LINE__, HEXCONSTE(7.88860905221011805412e-31, 0x3f9b, 0x80000000L, 0x00000000L), HEXCONSTE(7.88860905221011805412e-31, 0x3f9b, 0x80000000L, 0x00000000L), 0 },
	{ __LINE__, HEXCONSTE(1.40129846432481707092e-45, 0x3f6a, 0x80000000L, 0x00000000L), HEXCONSTE(1.40129846432481707092e-45, 0x3f6a, 0x80000000L, 0x00000000L), 0 },
	{ __LINE__, HEXCONSTE(0.00000000000000000000e+00, 0x0000, 0x00000000L, 0x00000000L), HEXCONSTE(0.00000000000000000000e+00, 0x0000, 0x00000000L, 0x00000000L), 0 },
	{ __LINE__, HEXCONSTE(2.40991986510288411774e-181, 0x3da7, 0x80000000L, 0x00000000L), HEXCONSTE(2.40991986510288411774e-181, 0x3da7, 0x80000000L, 0x00000000L), 0 },
	{ __LINE__, HEXCONSTE(1.40129846432481707092e-45, 0x3f6a, 0x80000000L, 0x00000000L), HEXCONSTE(1.40129846432481707092e-45, 0x3f6a, 0x80000000L, 0x00000000L), 0 },
	{ __LINE__, HEXCONSTE(0.00000000000000000000e+00, 0x0000, 0x00000000L, 0x00000000L), HEXCONSTE(0.00000000000000000000e+00, 0x0000, 0x00000000L, 0x00000000L), 0 },
	{ __LINE__, HEXCONSTE(4.94065645841246544177e-324, 0x3bcd, 0x80000000L, 0x00000000L), HEXCONSTE(4.94065645841246544177e-324, 0x3bcd, 0x80000000L, 0x00000000L), 0 },
	{ __LINE__, HEXCONSTE(5.01237274920645200930e-3011, 0x18ef, 0x80000000L, 0x00000000L), HEXCONSTE(5.01237274920645200930e-3011, 0x18ef, 0x80000000L, 0x00000000L), 0 },
	{ __LINE__, HEXCONSTE(-2.30512157082557678223e-01, 0xbffc, 0xec0b6100L, 0x00000000L), HEXCONSTE(-2.26554758731449528894e-01, 0xbffc, 0xe7fdf87eL, 0x04dc2e4cL), FLAG_INEXACT2 },
	{ __LINE__, HEXCONSTE(-2.03055411577224731445e-01, 0xbffc, 0xcfedc200L, 0x00000000L), HEXCONSTE(-2.00331721927011568860e-01, 0xbffc, 0xcd23c248L, 0x1c8cc7f6L), FLAG_INEXACT2 },
	{ __LINE__, HEXCONSTE(-2.19643592834472656250e+00, 0xc000, 0x8c926800L, 0x00000000L), HEXCONSTE(-1.14355772701168300406e+00, 0xbfff, 0x9260197fL, 0x4d3817b9L), FLAG_INEXACT2 },
	{ __LINE__, HEXCONSTE(-1.21190297603607177734e+00, 0xbfff, 0x9b1fa300L, 0x00000000L), HEXCONSTE(-8.80907890629840996312e-01, 0xbffe, 0xe1832df5L, 0x0b2398e5L), FLAG_INEXACT3 },
	{ __LINE__, HEXCONSTE(-1.67694151401519775391e+00, 0xbfff, 0xd6a60500L, 0x00000000L), HEXCONSTE(-1.03308435910990273571e+00, 0xbfff, 0x843c1bb8L, 0x316d6d15L), FLAG_INEXACT2 },
	{ __LINE__, HEXCONSTE(-3.92013692855834960938e+00, 0xc000, 0xfae38600L, 0x00000000L), HEXCONSTE(-1.32102990354261166711e+00, 0xbfff, 0xa9178204L, 0x6074616cL), FLAG_INEXACT2 },
	{ __LINE__, HEXCONSTE(3.32717180252075195312e+00, 0x4000, 0xd4f06200L, 0x00000000L), HEXCONSTE(1.27882991788893141116e+00, 0x3fff, 0xa3b0b2e1L, 0x3d5a8c00L), FLAG_INEXACT2 },
	{ __LINE__, HEXCONSTE(-1.34680461883544921875e+00, 0xbfff, 0xac641800L, 0x00000000L), HEXCONSTE(-9.32113685989933426980e-01, 0xbffe, 0xee9f00a5L, 0x7b143b32L), FLAG_INEXACT2 },
	{ __LINE__, HEXCONSTE(1.17549435082228750797e-38, 0x3f81, 0x80000000L, 0x00000000L), HEXCONSTE(1.17549435082228750797e-38, 0x3f81, 0x80000000L, 0x00000000L), 0 },
	{ __LINE__, HEXCONSTE(2.22507385850720138309e-308, 0x3c01, 0x80000000L, 0x00000000L), HEXCONSTE(2.22507385850720138309e-308, 0x3c01, 0x80000000L, 0x00000000L), 0 },
#if defined TEST_LDOUBLE && LDBL_MANT_DIG >= 64
	{ __LINE__, HEXCONSTE(3.36210314311209350626e-4932, 0x0001, 0x80000000L, 0x00000000L), HEXCONSTE(3.36210314311209350626e-4932, 0x0001, 0x80000000L, 0x00000000L), 0 },
	{ __LINE__, HEXCONSTE(1.68105157155604675313e-4932, 0x0000, 0x40000000L, 0x00000000L), HEXCONSTE(1.68105157155604675313e-4932, 0x0000, 0x40000000L, 0x00000000L), 0 },
#endif
	{ __LINE__, HEXCONSTE(2.00416836000897277800e-292, 0x3c36, 0x80000000L, 0x00000000L), HEXCONSTE(2.00416836000897277800e-292, 0x3c36, 0x80000000L, 0x00000000L), 0 },
	{ __LINE__, HEXCONSTE(-1.17549435082228750797e-38, 0xbf81, 0x80000000L, 0x00000000L), HEXCONSTE(-1.17549435082228750797e-38, 0xbf81, 0x80000000L, 0x00000000L), 0 },
	{ __LINE__, HEXCONSTE(-2.22507385850720138309e-308, 0xbc01, 0x80000000L, 0x00000000L), HEXCONSTE(-2.22507385850720138309e-308, 0xbc01, 0x80000000L, 0x00000000L), 0 },
#if defined TEST_LDOUBLE && LDBL_MANT_DIG >= 64
	{ __LINE__, HEXCONSTE(-3.36210314311209350626e-4932, 0x8001, 0x80000000L, 0x00000000L), HEXCONSTE(-3.36210314311209350626e-4932, 0x8001, 0x80000000L, 0x00000000L), 0 },
	{ __LINE__, HEXCONSTE(-1.68105157155604675313e-4932, 0x8000, 0x40000000L, 0x00000000L), HEXCONSTE(-1.68105157155604675313e-4932, 0x8000, 0x40000000L, 0x00000000L), 0 },
#endif
	{ __LINE__, HEXCONSTE(-2.00416836000897277800e-292, 0xbc36, 0x80000000L, 0x00000000L), HEXCONSTE(-2.00416836000897277800e-292, 0xbc36, 0x80000000L, 0x00000000L), 0 },
	{ __LINE__, HEXCONSTE(1.40129846432481707092e-45, 0x3f6a, 0x80000000L, 0x00000000L), HEXCONSTE(1.40129846432481707092e-45, 0x3f6a, 0x80000000L, 0x00000000L), 0 },
	{ __LINE__, HEXCONSTE(4.94065645841246544177e-324, 0x3bcd, 0x80000000L, 0x00000000L), HEXCONSTE(4.94065645841246544177e-324, 0x3bcd, 0x80000000L, 0x00000000L), 0 },
#if defined TEST_LDOUBLE && LDBL_MIN_EXP <= -16381
	{ __LINE__, HEXCONSTE(3.64519953188247460253e-4951, 0x0000, 0x00000000L, 0x00000001L), HEXCONSTE(3.64519953188247460253e-4951, 0x0000, 0x00000000L, 0x00000001L), FLAG_SUBNORM },
	{ __LINE__, HEXCONSTE(-3.64519953188247460253e-4951, 0x8000, 0x00000000L, 0x00000001L), HEXCONSTE(-3.64519953188247460253e-4951, 0x8000, 0x00000000L, 0x00000001L), FLAG_SUBNORM },
#endif
	{ __LINE__, HEXCONSTE(0.00000000000000000000e+00, 0x0000, 0x00000000L, 0x00000000L), HEXCONSTE(0.00000000000000000000e+00, 0x0000, 0x00000000L, 0x00000000L), 0 },
	{ __LINE__, HEXCONSTE(-1.40129846432481707092e-45, 0xbf6a, 0x80000000L, 0x00000000L), HEXCONSTE(-1.40129846432481707092e-45, 0xbf6a, 0x80000000L, 0x00000000L), 0 },
	{ __LINE__, HEXCONSTE(-4.94065645841246544177e-324, 0xbbcd, 0x80000000L, 0x00000000L), HEXCONSTE(-4.94065645841246544177e-324, 0xbbcd, 0x80000000L, 0x00000000L), 0 },
};

int main(int argc, char **argv)
{
	int status;
	
	status = 0;
	
	test_init(argc, argv);
	
	status |= test_table_f_f(fatan_data, ARRAY_SIZE(fatan_data), __FILE__);
	
	return status ? EXIT_FAILURE : EXIT_SUCCESS;
}
